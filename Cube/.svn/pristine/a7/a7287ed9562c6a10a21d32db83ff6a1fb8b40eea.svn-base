#include "Damage_Trap.h"



Damage_Trap::Damage_Trap()
{
}

Damage_Trap::Damage_Trap(int ID, Sprite_Sheet_Data base, sf::Vector2f position, World<Physical>* mapa, float damage) : Trap(ID, base, position, mapa)
{
	this->damage = damage;
	this->weight = 2;
}


Damage_Trap::~Damage_Trap()
{
}

void Damage_Trap::activate(Physical *target)
{
	this->deal_damage_to(target, this->damage);
}

void Damage_Trap::deal_damage(Physical *dealer, float damage)
{
	this->Move_Away(this, dealer);
}

void Damage_Trap::update(World<Physical>* mapa)
{
	this->Animate();
	
	if (weight > 1)
	{
		float x = this->getPosition().x;
		float y = this->getPosition().y;
		this->Physical_Collision(mapa);
		if (x == this->getPosition().x && y == this->getPosition().y)
			weight = 1;
	}
	mapa->draw(*this);
}
